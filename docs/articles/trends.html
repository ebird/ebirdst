<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>eBird Trends Data Products • ebirdst</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="eBird Trends Data Products">
<meta property="og:description" content="ebirdst">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ebirdst</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.2021.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/ebirdst.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ebirdst.html">Introduction to eBird Status Data Products</a>
    </li>
    <li>
      <a href="../articles/rasters.html">Working with Raster Data</a>
    </li>
    <li>
      <a href="../articles/trends.html">eBird Trends Data Products</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Function Reference</a>
</li>
<li>
  <a href="../articles/product-changelog.html#2020-changelog">Changelog</a>
</li>
<li>
  <a href="../news/index.html">Version History</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ebird/ebirdst/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>eBird Trends Data Products</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ebird/ebirdst/blob/HEAD/vignettes/trends.Rmd" class="external-link"><code>vignettes/trends.Rmd</code></a></small>
      <div class="hidden name"><code>trends.Rmd</code></div>

    </div>

    
    
<style type="text/css">
.table {
    width: 75%;
}
</style>
<p>The eBird Trends Data Products provide estimates of trends in
relative abundance based on eBird data. Trend estimates are made on a
27km by 27km grid for a single season per species (breeding,
non-breeding, or resident). For further details on the methodology used
to estimate these trends consult the associated paper:</p>
<blockquote>
<p>Fink, D., Johnston, A., Strimas-Mackey, M., Auer, T., Hochachka, W.
M., Ligocki, S., Oldham Jaromczyk, L., Robinson, O., Wood, C., Kelling,
S., &amp; Rodewald, A. D. (2023). A Double machine learning trend model
for citizen science data. Methods in Ecology and Evolution, 00, 1–14. <a href="https://doi.org/10.1111/2041-210X.14186" class="external-link uri">https://doi.org/10.1111/2041-210X.14186</a></p>
</blockquote>
<p>Data users who are not comfortable in R can either download the data
from the <a href="https://science.ebird.org/en/status-and-trends/download-data" class="external-link">eBird
Status and Trends website</a> or jump to the section of <a href="#export">exporting data to CSV</a>.</p>
<p>For a list of the available trends for species/season combinations
consult the data frame <code>ebirdst_trends_runs</code> that is provided
with this R package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ebird/ebirdst" class="external-link">ebirdst</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rnaturalearth/" class="external-link">rnaturalearth</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">ebirdst_trends_runs</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 587</span></span>
<span><span class="co">#&gt; Columns: 11</span></span>
<span><span class="co">#&gt; $ run_name     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "abetow_resident", "acafly_breeding", "acowoo_resident", …</span></span>
<span><span class="co">#&gt; $ species_code <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "abetow", "acafly", "acowoo", "affeag1", "aldfly", "allhu…</span></span>
<span><span class="co">#&gt; $ common_name  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Abert's Towhee", "Acadian Flycatcher", "Acorn Woodpecker…</span></span>
<span><span class="co">#&gt; $ season       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "resident", "breeding", "resident", "resident", "breeding…</span></span>
<span><span class="co">#&gt; $ region       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "north_america", "north_america", "north_america", "south…</span></span>
<span><span class="co">#&gt; $ start_year   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 200…</span></span>
<span><span class="co">#&gt; $ end_year     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 2021, 2021, 2021, 2021, 2021, 2021, 2021, 2020, 2021, 202…</span></span>
<span><span class="co">#&gt; $ start_date   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "01-04", "05-24", "01-04", "01-04", "06-28", "03-29", "01…</span></span>
<span><span class="co">#&gt; $ end_date     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "12-28", "07-20", "12-28", "12-28", "07-13", "06-07", "03…</span></span>
<span><span class="co">#&gt; $ rsquared     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.9021889, 0.8835865, 0.8989282, 0.7669864, 0.7061864, 0.…</span></span>
<span><span class="co">#&gt; $ beta0        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> -0.266613454, 0.614084165, 0.091665165, 0.528998734, -0.2…</span></span></code></pre></div>
<p>Information is provided on the model run for each species including
two measures of two predictive performance metrics
(<code>rsquared</code> and <code>beta0</code>) that are based on a
comparison of actual and estimated trends for a suite of simulations
(see Fink et al. 2023 for further details). The columns in this data
frame are as follows:</p>
<ul>
<li>
<code>species_code</code>: the alphanumeric eBird species code
uniquely identifying the species.</li>
<li>
<code>common_name</code>: the English common name of the
species.</li>
<li>
<code>season</code>: season that the trend was estimated for:
breeding, nonbreeding, or resident.</li>
<li>
<code>region</code>: the geographic region that the trend model was
run for. Note that broadly distributed species (e.g. Barn Swallow) will
only have trend estimates for a regional subset of their full
range.</li>
<li>
<code>start_year/end_year</code>: the start and end years of the
trend time period.</li>
<li>
<code>start_date/end_date</code>: the start and end dates
(<code>MM-DD</code> format) of the season for which the trend was
estimated.</li>
<li>
<code>rsquared</code>: R-squared value comparing the actual and
estimated trends from the simulations.</li>
<li>
<code>beta0</code>: the slope of a linear model fitting actual
vs. estimated trends (<code>actual ~ estimated</code>) for the
simulations. Positive values of <code>beta0</code> indicate that the
models are systematically <em>underestimating</em> the simulated trend
for this species.</li>
</ul>
<div class="section level2">
<h2 id="download">Downloading data<a class="anchor" aria-label="anchor" href="#download"></a>
</h2>
<p>Trends data access is granted through an Access Request Form at: <a href="https://ebird.org/st/request" class="external-link uri">https://ebird.org/st/request</a>. Access with this form
generates a key to be used with this R package and is provided
immediately (as long as commercial use is not requested). Our terms of
use have been designed to be quite permissive in many cases,
particularly academic and research use. When requesting data access,
please be sure to carefully read the terms of use and ensure that your
intended use is not restricted.</p>
<p>After completing the Access Request Form, you will be provided a
Status and Trends access key, which you will need when downloading data.
To store the key so the package can access it when downloading data, use
the function <code>set_ebirdst_access_key("XXXXX")</code>, where
<code>"XXXXX"</code> is the access key provided to you. <strong>Restart
R after setting the access key.</strong></p>
<p>Trends data can be downloaded for all species using
<code><a href="../reference/download_ebird_trends.html">download_ebird_trends()</a></code>. Note that trends data are much
smaller in size so are downloaded all at once in contrast to the Status
Data Products, which are downloaded on a per-species basis.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/download_ebird_trends.html">download_ebird_trends</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The data are stored in a <a href="https://parquet.apache.org/" class="external-link">parquet file</a>, a open source
format for efficiently storing tabular data. By default, the location of
this file is chosen by the R package and can be viewed with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_trends_path.html">get_trends_path</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/Users/mes335/data/ebirdst/2021/trends/ebird-trends_2021.parquet"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="load">Loading data into R<a class="anchor" aria-label="anchor" href="#load"></a>
</h2>
<p>The trends data for all species, or a subset of species, can be
loaded into R using the function <code><a href="../reference/load_trends.html">load_trends()</a></code>. This
function takes a list of run names, which can be found in
<code>ebirdst_trends_runs</code>, and the path to the trends data
parquet file. For example, we’ll load the breeding season trends data
for Sage Thrasher, a migratory species native to Western North American
<a href="https://en.wikipedia.org/wiki/Sagebrush_steppe" class="external-link">sagebrush
steppe</a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># identify the run for sage thrasher</span></span>
<span><span class="va">sagthr_run</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ebirdst_trends_runs</span>, <span class="va">common_name</span> <span class="op">==</span> <span class="st">"Sage Thrasher"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># sage thrasher has a breeding season trends</span></span>
<span><span class="co"># load the data into R</span></span>
<span><span class="va">sagthr_trends</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_trends.html">load_trends</a></span><span class="op">(</span><span class="va">sagthr_run</span><span class="op">$</span><span class="va">run_name</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">sagthr_trends</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 2,626</span></span>
<span><span class="co">#&gt; Columns: 13</span></span>
<span><span class="co">#&gt; $ species_code    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "sagthr", "sagthr", "sagthr", "sagthr", "sagthr", "sag…</span></span>
<span><span class="co">#&gt; $ season          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "breeding", "breeding", "breeding", "breeding", "breed…</span></span>
<span><span class="co">#&gt; $ srd_id          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 249761, 254256, 254258, 254264, 255757, 255758, 255764…</span></span>
<span><span class="co">#&gt; $ longitude       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> -120.3498, -122.6298, -121.8935, -119.6846, -122.4022,…</span></span>
<span><span class="co">#&gt; $ latitude        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 50.07224, 49.35282, 49.35282, 49.35282, 49.11302, 49.1…</span></span>
<span><span class="co">#&gt; $ abd             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 7.890115e-05, 1.894355e-04, 5.109199e-07, 8.267087e-04…</span></span>
<span><span class="co">#&gt; $ abd_ppy         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> -0.18723272, -3.61560800, -2.45742859, -0.06229821, -1…</span></span>
<span><span class="co">#&gt; $ abd_ppy_lower   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> -3.151492, -6.751502, -6.397155, -5.261203, -9.675854,…</span></span>
<span><span class="co">#&gt; $ abd_ppy_upper   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 2.9550936, -0.9087975, 3.8106974, 9.8925997, 2.1489321…</span></span>
<span><span class="co">#&gt; $ abd_ppy_nonzero <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE,…</span></span>
<span><span class="co">#&gt; $ abd_trend       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> -2.5895948, -40.2835517, -29.4139623, -0.8686519, -13.…</span></span>
<span><span class="co">#&gt; $ abd_trend_lower <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> -36.12939, -62.41749, -60.36794, -53.07653, -75.94230,…</span></span>
<span><span class="co">#&gt; $ abd_trend_upper <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 50.338333, -11.998235, 68.806638, 274.591801, 34.67085…</span></span></code></pre></div>
<p>Columns beginning with <code>abd_ppy</code> provide estimates of the
percent per year trend and 80% confidence intervals, while those
beginning with <code>abd_trend</code> provide estiamtes of the
cumulative trend and 80% confidence intervals over the time period. For
a full list of column descriptions see the function documentation
<code><a href="../reference/load_trends.html">?load_trends</a></code>.</p>
</div>
<div class="section level2">
<h2 id="export">Exporting to CSV<a class="anchor" aria-label="anchor" href="#export"></a>
</h2>
<p>For those data users who would prefer to access the data in more
traditional CSV format for use outside of R the following code chunks
can be used. For users who are comfortable with R, <strong>we strongly
encourage skipping this section</strong> and using the
<code><a href="../reference/load_trends.html">load_trends()</a></code> function described above to load the data
into R; <strong>working with the trends data in R will be much
easier</strong>. To download and export the full trends dataset to CSV
use:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ebird/ebirdst" class="external-link">ebirdst</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># download data</span></span>
<span><span class="fu"><a href="../reference/download_ebird_trends.html">download_ebird_trends</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># load into R</span></span>
<span><span class="va">trends</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_trends.html">load_trends</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># write to csv</span></span>
<span><span class="co"># be sure to modify the path to the csv file to save the file to directory of </span></span>
<span><span class="co"># your choice on your hard drive</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_csv</a></span><span class="op">(</span><span class="va">trends</span>, <span class="st">"ebird-trends_all-species_2021.csv"</span><span class="op">)</span></span></code></pre></div>
<p>To download the trends dataset and export a subset of species based
on common names to CSV use:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ebird/ebirdst" class="external-link">ebirdst</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># modify this list of common names</span></span>
<span><span class="va">common_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sage Thrasher"</span>, <span class="st">"Sagebrush Sparrow"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># download data</span></span>
<span><span class="fu"><a href="../reference/download_ebird_trends.html">download_ebird_trends</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># load into R</span></span>
<span><span class="va">trends</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_trends.html">load_trends</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># subset to chosen species </span></span>
<span><span class="va">species_codes</span> <span class="op">&lt;-</span> <span class="va">ebirdst_trends_runs</span><span class="op">[</span></span>
<span>  <span class="va">ebirdst_trends_runs</span><span class="op">$</span><span class="va">common_name</span> <span class="op"><a href="https://rdrr.io/pkg/terra/man/match.html" class="external-link">%in%</a></span> <span class="va">common_names</span>,</span>
<span>  <span class="st">"species_code"</span>, drop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">]</span></span>
<span><span class="co"># write to csv</span></span>
<span><span class="co"># be sure to modify the path to the csv file to save the file to directory of </span></span>
<span><span class="co"># your choice on your hard drive</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_csv</a></span><span class="op">(</span><span class="va">trends</span><span class="op">[</span><span class="va">trends</span><span class="op">$</span><span class="va">species_code</span> <span class="op"><a href="https://rdrr.io/pkg/terra/man/match.html" class="external-link">%in%</a></span> <span class="va">species_codes</span>, <span class="op">]</span>, </span>
<span>          <span class="st">"ebird-trends_selected-species_2021.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="spatial">Conversion to spatial formats<a class="anchor" aria-label="anchor" href="#spatial"></a>
</h2>
<p>The eBird trends data are stored in a tabular format, where each row
gives the trend estimate for a single cell in a 27km x 27km equal area
grid. For each grid cell, the coordinates (longitude and latitude) are
provided for the center of the grid cell. For many applications, an
explicitly spatial format is more useful and these coordinates can be
use to convert from the tabular format to either a vector or raster
format.</p>
<div class="section level3">
<h3 id="spatial-points">Vector (points)<a class="anchor" aria-label="anchor" href="#spatial-points"></a>
</h3>
<p>The tabular trend data can be converted into point vector featurs for
use with the <code>sf</code> package using the <code>sf</code> function
<code><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trends_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">sagthr_trends</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"longitude"</span>, <span class="st">"latitude"</span><span class="op">)</span>, </span>
<span>                      crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://www.math.uzh.ch/pages/spam/reference/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">trends_sf</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 2626 features and 11 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -122.6298 ymin: 33.04599 xmax: -102.8474 ymax: 50.07224</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,626 × 12</span></span></span>
<span><span class="co">#&gt;    species_code season   srd_id         abd abd_ppy abd_ppy_lower abd_ppy_upper</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> sagthr       breeding <span style="text-decoration: underline;">249</span>761 0.000<span style="text-decoration: underline;">078</span>9   -<span style="color: #BB0000;">0.187</span>          -<span style="color: #BB0000;">3.15</span>         2.96 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> sagthr       breeding <span style="text-decoration: underline;">254</span>256 0.000<span style="text-decoration: underline;">189</span>    -<span style="color: #BB0000;">3.62</span>           -<span style="color: #BB0000;">6.75</span>        -<span style="color: #BB0000;">0.909</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> sagthr       breeding <span style="text-decoration: underline;">254</span>258 0.000<span style="text-decoration: underline;">000</span>511 -<span style="color: #BB0000;">2.46</span>           -<span style="color: #BB0000;">6.40</span>         3.81 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> sagthr       breeding <span style="text-decoration: underline;">254</span>264 0.000<span style="text-decoration: underline;">827</span>    -<span style="color: #BB0000;">0.062</span><span style="color: #BB0000; text-decoration: underline;">3</span>         -<span style="color: #BB0000;">5.26</span>         9.89 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> sagthr       breeding <span style="text-decoration: underline;">255</span>757 0.000<span style="text-decoration: underline;">001</span>04  -<span style="color: #BB0000;">1.04</span>           -<span style="color: #BB0000;">9.68</span>         2.15 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> sagthr       breeding <span style="text-decoration: underline;">255</span>758 0.000<span style="text-decoration: underline;">001</span>21  -<span style="color: #BB0000;">1.74</span>           -<span style="color: #BB0000;">5.26</span>         4.12 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> sagthr       breeding <span style="text-decoration: underline;">255</span>764 0.007<span style="text-decoration: underline;">26</span>     -<span style="color: #BB0000;">3.14</span>           -<span style="color: #BB0000;">9.34</span>         3.31 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> sagthr       breeding <span style="text-decoration: underline;">255</span>766 0.000<span style="text-decoration: underline;">517</span>    -<span style="color: #BB0000;">0.775</span>          -<span style="color: #BB0000;">7.14</span>         3.80 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> sagthr       breeding <span style="text-decoration: underline;">257</span>265 0.018<span style="text-decoration: underline;">1</span>      -<span style="color: #BB0000;">6.04</span>          -<span style="color: #BB0000;">12.4</span>         -<span style="color: #BB0000;">1.63</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> sagthr       breeding <span style="text-decoration: underline;">257</span>266 0.003<span style="text-decoration: underline;">98</span>      1.82           -<span style="color: #BB0000;">4.29</span>         7.57 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,616 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: abd_ppy_nonzero &lt;lgl&gt;, abd_trend &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   abd_trend_lower &lt;dbl&gt;, abd_trend_upper &lt;dbl&gt;, geometry &lt;POINT [°]&gt;</span></span></span></code></pre></div>
<p>These points can then be exported to GeoPackage for use in a GIS such
as QGIS or ArcGIS with</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># be sure to modify the path to the file to save the file to directory of </span></span>
<span><span class="co"># your choice on your hard drive</span></span>
<span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_write.html" class="external-link">write_sf</a></span><span class="op">(</span><span class="va">trends_sf</span>, <span class="st">"ebird-trends_sagthr_2021.gpkg"</span>,</span>
<span>         layer <span class="op">=</span> <span class="st">"sagthr_trends"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="spatial-raster">Raster<a class="anchor" aria-label="anchor" href="#spatial-raster"></a>
</h3>
<p>The tabular trend estimates can most easily be converted to raster
format for use with the <code>terra</code> package using the function
<code><a href="../reference/rasterize_trends.html">rasterize_trends()</a></code>. Any of the columns in the trends data
frame can be selected using the <code>layers</code> argument and
converted into layers in the resulting raster object.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># rasterize the percent per year trend with confidence limits (default)</span></span>
<span><span class="va">ppy_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rasterize_trends.html">rasterize_trends</a></span><span class="op">(</span><span class="va">sagthr_trends</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://www.math.uzh.ch/pages/spam/reference/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ppy_raster</span><span class="op">)</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 72, 98, 3  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 26665.26, 26665.28  (x, y)</span></span>
<span><span class="co">#&gt; extent      : -10602273, -7989077, 3661218, 5581118  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : +proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; names       :   abd_ppy, abd_ppy_lower, abd_ppy_upper </span></span>
<span><span class="co">#&gt; min values  : -9.012455,   -15.5160826,     -6.177617 </span></span>
<span><span class="co">#&gt; max values  :  6.019554,     0.9326682,     12.022050</span></span>
<span><span class="co"># rasterize the cumulative trend estimate</span></span>
<span><span class="va">trends_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rasterize_trends.html">rasterize_trends</a></span><span class="op">(</span><span class="va">sagthr_trends</span>, layers <span class="op">=</span> <span class="st">"abd_trend"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://www.math.uzh.ch/pages/spam/reference/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ppy_raster</span><span class="op">)</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 72, 98, 3  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 26665.26, 26665.28  (x, y)</span></span>
<span><span class="co">#&gt; extent      : -10602273, -7989077, 3661218, 5581118  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : +proj=sinu +lon_0=0 +x_0=0 +y_0=0 +R=6371007.181 +units=m +no_defs </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; names       :   abd_ppy, abd_ppy_lower, abd_ppy_upper </span></span>
<span><span class="co">#&gt; min values  : -9.012455,   -15.5160826,     -6.177617 </span></span>
<span><span class="co">#&gt; max values  :  6.019554,     0.9326682,     12.022050</span></span></code></pre></div>
<p>These raster objects can be exported to GeoTIFF files for use in a
GIS such as QGIS or ArcGIS with</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/writeRaster.html" class="external-link">writeRaster</a></span><span class="op">(</span><span class="va">trends_raster</span>, filename <span class="op">=</span> <span class="st">"ebird-trends_sagthr_2021.tif"</span><span class="op">)</span></span></code></pre></div>
<p>A simple map of these data can be produced from the raster data. For
example, we’ll make a map of percent per year change in relative
abundance for Sage Thrasher. Note that this is slightly different than
the trends maps on the Status and Trends website, which show the
cumulative trend rather than the annual trend.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># define breaks and palettes similar to those on s&amp;t website</span></span>
<span><span class="va">breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">breaks</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/global.html" class="external-link">global</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">ppy_raster</span><span class="op">[[</span><span class="st">"abd_ppy"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, </span>
<span>                    <span class="va">min</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">/</span> <span class="fl">2</span></span>
<span><span class="va">breaks</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">breaks</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">Inf</span></span>
<span><span class="va">breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/flip.html" class="external-link">rev</a></span><span class="op">(</span><span class="va">breaks</span><span class="op">)</span>, <span class="va">breaks</span><span class="op">)</span></span>
<span><span class="va">pal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trends_palette.html">trends_palette</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">breaks</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co"># make a simple map</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ppy_raster</span><span class="op">[[</span><span class="st">"abd_ppy"</span><span class="op">]</span><span class="op">]</span>, </span>
<span>     col <span class="op">=</span> <span class="va">pal</span>, breaks <span class="op">=</span>  <span class="va">breaks</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Sage Thrasher abundance trend 2007-2021 [% change per year]"</span>,</span>
<span>     axes <span class="op">=</span> <span class="cn">FALSE</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="trends_files/figure-html/spatial-raster-map-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="applications">Applications<a class="anchor" aria-label="anchor" href="#applications"></a>
</h2>
<div class="section level3">
<h3 id="applications-regional">Regional trends<a class="anchor" aria-label="anchor" href="#applications-regional"></a>
</h3>
<p>eBird trend estimates are made on a 27km by 27km grid, which allows
summarization over broader regions. The goal of summarization is
typically to produce a mean trend in relative abundance for a region
such as a state. Since the relative abundance of a species varies
throughout it’s range, we need to weight the mean trend calculation by
relative abundance (<code>abd</code> in the trends data frame). For
example, let’s calculate the state-level mean percent per year trends in
relative abundance for Sage Thrasher.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># boundaries of states in the united states</span></span>
<span><span class="va">states</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/rnaturalearth/reference/ne_states.html" class="external-link">ne_states</a></span><span class="op">(</span>iso_a2 <span class="op">=</span> <span class="st">"US"</span>, returnclass <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span>state_code <span class="op">=</span> <span class="va">iso_3166_2</span>,</span>
<span>            state_name <span class="op">=</span> <span class="va">name</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">trends_sf</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># attach state to the trends data</span></span>
<span><span class="va">trends_states</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_join.html" class="external-link">st_join</a></span><span class="op">(</span><span class="va">trends_sf</span>, <span class="va">states</span>, left <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># abundance-weighted average in region</span></span>
<span><span class="va">trends_states</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">state_code</span>, <span class="va">state_name</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>abd_ppy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">abd</span> <span class="op">*</span> <span class="va">abd_ppy</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">abd</span><span class="op">)</span>,</span>
<span>            .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">abd_ppy</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 13 × 3</span></span></span>
<span><span class="co">#&gt;    state_code state_name   abd_ppy</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> US-WA      Washington    -<span style="color: #BB0000;">5.39</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> US-SD      South Dakota  -<span style="color: #BB0000;">4.06</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> US-OR      Oregon        -<span style="color: #BB0000;">3.59</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> US-MT      Montana       -<span style="color: #BB0000;">3.53</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> US-CA      California    -<span style="color: #BB0000;">3.30</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> US-UT      Utah          -<span style="color: #BB0000;">2.62</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> US-CO      Colorado      -<span style="color: #BB0000;">2.59</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> US-ID      Idaho         -<span style="color: #BB0000;">2.21</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> US-NV      Nevada        -<span style="color: #BB0000;">2.03</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> US-WY      Wyoming       -<span style="color: #BB0000;">1.88</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> US-NE      Nebraska      -<span style="color: #BB0000;">1.46</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> US-NM      New Mexico    -<span style="color: #BB0000;">1.22</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> US-AZ      Arizona       -<span style="color: #BB0000;">0.938</span></span></span></code></pre></div>
<p>Based on these data, Sage Thrasher populations appear to be in
decline throughout their entire range; however, some states
(e.g. Washington) are experiencing much steeper declines than others
(e.g. Arizona).</p>
</div>
<div class="section level3">
<h3 id="applications-multi">Multi-species trends<a class="anchor" aria-label="anchor" href="#applications-multi"></a>
</h3>
<p>In some cases, we may be interested in the trend for an entire
community of birds, which can be estimated by calculating the cell-wise
mean trend across a suite of species. For example, the eBird Trends Data
Products contain trend estimates for three species that breedin sabrush
<a href="https://en.wikipedia.org/wiki/Sagebrush_steppe" class="external-link">sagebrush</a>:
Brewer’s Sparrow, Sagebrush Sparrow, and Sage Thrasher. We can calculate
an average trend for this group of species, which will provide an
estimate of the trend in the sagebrush bird community.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load trends for sagebrush species</span></span>
<span><span class="va">sagebrush_species</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Brewer's Sparrow"</span>, <span class="st">"Sagebrush Sparrow"</span>, <span class="st">"Sage Thrasher"</span><span class="op">)</span></span>
<span><span class="va">sagebrush_runs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ebirdst_trends_runs</span>, </span>
<span>                         <span class="va">common_name</span> <span class="op"><a href="https://rdrr.io/pkg/terra/man/match.html" class="external-link">%in%</a></span> <span class="va">sagebrush_species</span><span class="op">)</span></span>
<span><span class="va">trends_sagebrush_species</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_trends.html">load_trends</a></span><span class="op">(</span><span class="va">sagebrush_runs</span><span class="op">$</span><span class="va">run_name</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate mean trend for each cell</span></span>
<span><span class="va">trends_sagebrush</span> <span class="op">&lt;-</span> <span class="va">trends_sagebrush_species</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">srd_id</span>, <span class="va">latitude</span>, <span class="va">longitude</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>n_species <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            abd_ppy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">abd_ppy</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>            .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">trends_sagebrush</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   srd_id latitude longitude n_species abd_ppy</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> <span style="text-decoration: underline;">180</span>719     61.1     -<span style="color: #BB0000;">135.</span>         1   0.937</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> <span style="text-decoration: underline;">182</span>217     60.9     -<span style="color: #BB0000;">136.</span>         1  -<span style="color: #BB0000;">0.862</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> <span style="text-decoration: underline;">182</span>218     60.9     -<span style="color: #BB0000;">135.</span>         1  -<span style="color: #BB0000;">1.49</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> <span style="text-decoration: underline;">182</span>219     60.9     -<span style="color: #BB0000;">135.</span>         1  -<span style="color: #BB0000;">0.442</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> <span style="text-decoration: underline;">182</span>220     60.9     -<span style="color: #BB0000;">135.</span>         1  -<span style="color: #BB0000;">0.859</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> <span style="text-decoration: underline;">182</span>221     60.9     -<span style="color: #BB0000;">134.</span>         1   0.728</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="http://strimas.com" class="external-link">Matthew Strimas-Mackey</a>, Shawn Ligocki, <a href="http://twitter.com/tom_auer" class="external-link">Tom Auer</a>, Daniel Fink.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
