<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Load predictive performance metric (PPM) rasters — load_ppm • ebirdst</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Load predictive performance metric (PPM) rasters — load_ppm"><meta name="description" content="eBird Status models are evaluated against a test set of eBird data not used
during model training and a suite of predictive performance metrics (PPMs)
are calculated. The PPMs for each base model are summarized to a 27 km
resolution raster grid, where the cell values are the average across all
models in the ensemble contributing to that cell. These data are available in
raster format provided download_ppms = TRUE was used when calling
ebirdst_download_status()."><meta property="og:description" content="eBird Status models are evaluated against a test set of eBird data not used
during model training and a suite of predictive performance metrics (PPMs)
are calculated. The PPMs for each base model are summarized to a 27 km
resolution raster grid, where the cell values are the average across all
models in the ensemble contributing to that cell. These data are available in
raster format provided download_ppms = TRUE was used when calling
ebirdst_download_status()."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ebirdst</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.2023.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/status.html">Get Started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/status.html">Introduction to eBird Status Data Products</a></li>
    <li><a class="dropdown-item" href="../articles/applications.html">eBird Status Data Products Applications</a></li>
    <li><a class="dropdown-item" href="../articles/trends.html">eBird Trends Data Products</a></li>
    <li><a class="dropdown-item" href="../articles/api.html">eBird Status and Trends Data Products API</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Function Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/product-changelog.html#2022-changelog">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Version History</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/ebird/ebirdst/" aria-label="github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Load predictive performance metric (PPM) rasters</h1>
      <small class="dont-index">Source: <a href="https://github.com/ebird/ebirdst/blob/HEAD/R/load.R" class="external-link"><code>R/load.R</code></a></small>
      <div class="d-none name"><code>load_ppm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>eBird Status models are evaluated against a test set of eBird data not used
during model training and a suite of predictive performance metrics (PPMs)
are calculated. The PPMs for each base model are summarized to a 27 km
resolution raster grid, where the cell values are the average across all
models in the ensemble contributing to that cell. These data are available in
raster format provided <code>download_ppms = TRUE</code> was used when calling
<code><a href="ebirdst_download_status.html">ebirdst_download_status()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">load_ppm</span><span class="op">(</span></span>
<span>  <span class="va">species</span>,</span>
<span>  ppm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"binary_f1"</span>, <span class="st">"binary_mcc"</span>, <span class="st">"binary_prevalence"</span>, <span class="st">"occ_bernoulli_dev"</span>,</span>
<span>    <span class="st">"occ_bin_spearman"</span>, <span class="st">"occ_brier"</span>, <span class="st">"occ_pr_auc"</span>, <span class="st">"occ_pr_auc_gt_prev"</span>,</span>
<span>    <span class="st">"occ_pr_auc_normalized"</span>, <span class="st">"count_log_pearson"</span>, <span class="st">"count_mae"</span>, <span class="st">"count_poisson_dev"</span>,</span>
<span>    <span class="st">"count_rmse"</span>, <span class="st">"count_spearman"</span>, <span class="st">"abd_log_pearson"</span>, <span class="st">"abd_mae"</span>, <span class="st">"abd_poisson_dev"</span>,</span>
<span>    <span class="st">"abd_rmse"</span>, <span class="st">"abd_spearman"</span><span class="op">)</span>,</span>
<span>  path <span class="op">=</span> <span class="fu"><a href="ebirdst_data_dir.html">ebirdst_data_dir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-species">species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>character; the species to load data for, given as a scientific
name, common name or six-letter species code (e.g. "woothr"). The full list
of valid species is in the <a href="ebirdst_runs.html">ebirdst_runs</a> data frame included in this
package. To download the example dataset, use <code>"yebsap-example"</code>.</p></dd>


<dt id="arg-ppm">ppm<a class="anchor" aria-label="anchor" href="#arg-ppm"></a></dt>
<dd><p>character; the name of a single metric to load data for. See
Details for definitions of each metric.</p></dd>


<dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>character; directory to download the data to. All downloaded
files will be placed in a sub-directory of this directory named for the
data version year, e.g. "2020" for the 2020 Status Data Products. Each
species' data package will then appear in a directory named with the eBird
species code. Defaults to a persistent data directory, which can be found
by calling <code><a href="ebirdst_data_dir.html">ebirdst_data_dir()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">SpatRaster</a> object with the PPM data. For
migrants, rasters are weekly with  52 layers, where the layer names are the
dates (<code>MM-DD</code> format) of the midpoint of each week. For residents, a
single year round layer is returned.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Nineteen predictive performance metrics are provided:</p><ul><li><p><code>binary_f1</code>: F1-score comparing the model predictions converted to binary
with the observed detection/non-detection for the test checklists.</p></li>
<li><p><code>binary_mcc</code>: Matthews Correlation Coefficient (MCC) comparing the model
predictions converted to binary with the observed detection/non-detection
for the test checklists.</p></li>
<li><p><code>binary_prevalence</code>: the observed detection probability after
spatiotemporal subsampling.</p></li>
<li><p><code>occ_bernoulli_dev</code>: proportion of Bernoulli deviance explained comparing
the predicted occurrence with the observed detection/non-detection for the
test checklists.</p></li>
<li><p><code>occ_bin_spearman</code>: test observations are binned by predicted encounter
rate with bin widths of 0.05, then the mean observed prevalence and predicted
encounter rate are calculated within bins. This metric is the Spearman's rank
correlation coefficient comparing the observed and predicted binned mean
values.</p></li>
<li><p><code>occ_brier</code>: the Brier score is the mean squared difference between
predicted encounter rate and observed detection/non-detection.</p></li>
<li><p><code>occ_pr_auc</code>: the area on the precision-recall curve (PR AUC) generated by
comparing the predicted encounter rate with the observed
detection/non-detection for the test checklists.</p></li>
<li><p><code>occ_pr_auc_gt_prev</code>: the proportion of the ensemble for which the PR AUC
is greater than observed prevalence, which indicates that the model is
performing better than random guessing.</p></li>
<li><p><code>occ_pr_auc_normalized</code>: the PR AUC normalized to account for class
imbalance so that a value of 0 represents performance equal to random
guessing and a value of 1 represents perfect classification.</p></li>
<li><p><code>count_log_pearson</code>: Pearson correlation coefficient comparing the
logarithm of the predicted count with the logarithm of the observed count for
the subset of test checklists on which the species was detected.</p></li>
<li><p><code>count_mae</code>: the mean absolute error (MAE) comparing the observed and
predicted counts for the subset of test checklists on which the species was
detected.</p></li>
<li><p><code>count_poisson_dev</code>: proportion of Poisson deviance explained, comparing
the observed and predicted counts for the subset of test checklists on which
the species was detected.</p></li>
<li><p><code>count_rmse</code>: route mean squared error (RMSE) comparing the observed and
predicted counts for the subset of test checklists on which the species was
detected.</p></li>
<li><p><code>count_spearman</code>: Spearman's rank correlation coefficient comparing the
observed and predicted counts for the subset of test checklists on which the
species was detected.</p></li>
<li><p><code>abd_log_pearson</code>: Pearson correlation coefficient comparing the logarithm
of the predicted relative abundance with the logarithm of the observed
count for the full set of test checklists.</p></li>
<li><p><code>abd_mae</code>: the mean absolute error (MAE) comparing the observed counts and
predicted relative abundance for the full set of test checklists.</p></li>
<li><p><code>abd_poisson_dev</code>: proportion of Poisson deviance explained, comparing the
predicted relative abundance with the observed count for the full set of test
checklists.</p></li>
<li><p><code>abd_rmse</code>: root mean squared error comparing the predicted relative
abundance with the observed count for the full set of test checklists.</p></li>
<li><p><code>abd_spearman</code>: Spearman's rank correlation coefficient comparing the
predicted relative abundance with the observed count for the full set of
test checklists.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># download example data if hasn't already been downloaded</span></span></span>
<span class="r-in"><span><span class="fu"><a href="ebirdst_download_status.html">ebirdst_download_status</a></span><span class="op">(</span><span class="st">"yebsap-example"</span>, download_ppms <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load area under the precision-recall curve PPM raster</span></span></span>
<span class="r-in"><span><span class="fu">load_ppm</span><span class="op">(</span><span class="st">"yebsap-example"</span>, ppm <span class="op">=</span> <span class="st">"binary_pr_auc"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="http://strimas.com" class="external-link">Matthew Strimas-Mackey</a>, Shawn Ligocki, Tom Auer, Daniel Fink.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

